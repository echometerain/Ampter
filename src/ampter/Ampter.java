/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package ampter;

import java.awt.image.BufferedImage;
import javax.swing.*;
import java.util.*;

/**
 *
 * @author hhwl
 */
public class Ampter extends javax.swing.JFrame {

    static BufferedImage[][] specs;
    static boolean playing = false;
    static boolean ef_selected = false;
    static int headPos = 0;
    static int bl_size = 0;
    static int sample_rate = 0;
    static int num_frames = 0;
    static int num_bl = 0;

    public static void setSpecs(BufferedImage[][] specs) {
        Ampter.specs = specs;
    }

    public static int getHeadPos() {
        return headPos;
    }

    public static void setHeadPos(int headPos) {
        Ampter.headPos = headPos;
    }

    public static int getBl_size() {
        return bl_size;
    }

    public static void setBl_size(int bl_size) {
        Ampter.bl_size = bl_size;
    }

    public static int getSample_rate() {
        return sample_rate;
    }

    public static void setSample_rate(int sample_rate) {
        Ampter.sample_rate = sample_rate;
    }

    public static int getNum_frames() {
        return num_frames;
    }

    public static void setNum_frames(int num_frames) {
        Ampter.num_frames = num_frames;
    }

    public static int getNum_bl() {
        return num_bl;
    }

    public static void setNum_bl(int num_bl) {
        Ampter.num_bl = num_bl;
    }

    public static boolean getPlaying() {
        return playing;
    }

    /**
     * Creates new form Ampter
     */
    // create thread for jep (jep python can't multithread)
    Thread pyThread = new Thread(new PyLink());

    public Ampter() {
        // prevents weird locale error
        Locale.setDefault(new Locale("en", "US"));
        try {
            UIManager.setLookAndFeel("com.formdev.flatlaf.FlatDarkLaf");
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        pyThread.start();
        this.setIconImage(new ImageIcon("./assets/ampterIcon.png").getImage());
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        jMenu2 = new javax.swing.JMenu();
        chooseFiles = new javax.swing.JFileChooser();
        viewport = new javax.swing.JPanel();
        jScrollBar1 = new javax.swing.JScrollBar();
        leftPanel = new javax.swing.JPanel();
        loadAudio = new javax.swing.JButton();
        effectsLabel = new javax.swing.JLabel();
        chooseStock = new javax.swing.JScrollPane();
        stockList = new javax.swing.JList<>();
        loadVSTButton = new javax.swing.JButton();
        VSTUIButton = new javax.swing.JButton();
        separator = new javax.swing.JSeparator();
        optionsLabel = new javax.swing.JLabel();
        optionsPanel = new javax.swing.JPanel();
        sizeLabel = new javax.swing.JLabel();
        sizeSlider = new javax.swing.JSlider();
        leftLabel = new javax.swing.JLabel();
        leftSlider = new javax.swing.JSlider();
        rightLabel = new javax.swing.JLabel();
        rightSlider = new javax.swing.JSlider();
        shiftBack = new javax.swing.JButton();
        playPause = new javax.swing.JButton();
        shiftForward = new javax.swing.JButton();
        stopReset = new javax.swing.JButton();
        saveAudio = new javax.swing.JButton();

        jMenu1.setText("File");
        jMenuBar1.add(jMenu1);

        jMenu2.setText("Edit");
        jMenuBar1.add(jMenu2);

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Ampter");
        setBackground(new java.awt.Color(0, 0, 0));
        setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));

        viewport.setBackground(new java.awt.Color(0, 0, 0));
        viewport.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        viewport.setMinimumSize(new java.awt.Dimension(200, 13));
        viewport.setPreferredSize(new java.awt.Dimension(600, 13));
        viewport.setLayout(new java.awt.BorderLayout());

        jScrollBar1.setOrientation(javax.swing.JScrollBar.HORIZONTAL);
        viewport.add(jScrollBar1, java.awt.BorderLayout.SOUTH);

        getContentPane().add(viewport, java.awt.BorderLayout.CENTER);

        leftPanel.setBackground(new java.awt.Color(153, 153, 153));
        leftPanel.setPreferredSize(new java.awt.Dimension(200, 701));

        loadAudio.setBackground(new java.awt.Color(0, 102, 153));
        loadAudio.setText("Load Audio");
        loadAudio.setToolTipText("");
        loadAudio.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                loadAudioActionPerformed(evt);
            }
        });

        effectsLabel.setForeground(new java.awt.Color(0, 0, 0));
        effectsLabel.setText("Effects");

        stockList.setModel(new javax.swing.AbstractListModel<String>() {
            String[] strings = { "Gain", "Bitcrush", "Chorus", "Clipping", "Compressor", "Delay", "Distortion", "Reverb", "PitchShift", "Phaser", "NoiseGate" };
            public int getSize() { return strings.length; }
            public String getElementAt(int i) { return strings[i]; }
        });
        stockList.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        chooseStock.setViewportView(stockList);

        loadVSTButton.setText("Load VST");
        loadVSTButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                loadVSTButtonActionPerformed(evt);
            }
        });

        VSTUIButton.setText("Open VST UI");
        VSTUIButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                VSTUIButtonActionPerformed(evt);
            }
        });

        optionsLabel.setForeground(new java.awt.Color(0, 0, 0));
        optionsLabel.setText("Options");

        optionsPanel.setBackground(new java.awt.Color(70, 73, 75));

        javax.swing.GroupLayout optionsPanelLayout = new javax.swing.GroupLayout(optionsPanel);
        optionsPanel.setLayout(optionsPanelLayout);
        optionsPanelLayout.setHorizontalGroup(
            optionsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 144, Short.MAX_VALUE)
        );
        optionsPanelLayout.setVerticalGroup(
            optionsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 116, Short.MAX_VALUE)
        );

        sizeLabel.setForeground(new java.awt.Color(0, 0, 0));
        sizeLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        sizeLabel.setText("Size");

        sizeSlider.setOrientation(javax.swing.JSlider.VERTICAL);

        leftLabel.setForeground(new java.awt.Color(0, 0, 0));
        leftLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        leftLabel.setText("L");

        leftSlider.setOrientation(javax.swing.JSlider.VERTICAL);
        leftSlider.setValue(100);

        rightLabel.setForeground(new java.awt.Color(0, 0, 0));
        rightLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        rightLabel.setText("R");

        rightSlider.setOrientation(javax.swing.JSlider.VERTICAL);
        rightSlider.setValue(100);

        shiftBack.setText("<<");
        shiftBack.setMargin(new java.awt.Insets(0, 0, 0, 0));
        shiftBack.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                shiftBackActionPerformed(evt);
            }
        });

        playPause.setText(">||");
        playPause.setMargin(new java.awt.Insets(0, 0, 0, 0));
        playPause.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                playPauseActionPerformed(evt);
            }
        });

        shiftForward.setLabel(">>");
        shiftForward.setMargin(new java.awt.Insets(0, 0, 0, 0));
        shiftForward.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                shiftForwardActionPerformed(evt);
            }
        });

        stopReset.setText("X");
        stopReset.setMargin(new java.awt.Insets(0, 0, 0, 0));
        stopReset.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                stopResetActionPerformed(evt);
            }
        });

        saveAudio.setBackground(new java.awt.Color(0, 102, 153));
        saveAudio.setText("Save Audio");
        saveAudio.setToolTipText("");
        saveAudio.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                saveAudioActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout leftPanelLayout = new javax.swing.GroupLayout(leftPanel);
        leftPanel.setLayout(leftPanelLayout);
        leftPanelLayout.setHorizontalGroup(
            leftPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(separator, javax.swing.GroupLayout.Alignment.TRAILING)
            .addGroup(leftPanelLayout.createSequentialGroup()
                .addGap(22, 22, 22)
                .addGroup(leftPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(saveAudio)
                    .addComponent(loadAudio)
                    .addComponent(optionsLabel)
                    .addComponent(effectsLabel)
                    .addGroup(leftPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                        .addGroup(leftPanelLayout.createSequentialGroup()
                            .addGroup(leftPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(sizeSlider, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(sizeLabel))
                            .addGap(37, 37, 37)
                            .addGroup(leftPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addComponent(leftSlider, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(leftLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addGroup(leftPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(rightSlider, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(rightLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGroup(leftPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(loadVSTButton, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(VSTUIButton, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addComponent(optionsPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(chooseStock, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(leftPanelLayout.createSequentialGroup()
                        .addComponent(shiftBack, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(playPause, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(shiftForward, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(stopReset, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(33, Short.MAX_VALUE))
        );
        leftPanelLayout.setVerticalGroup(
            leftPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(leftPanelLayout.createSequentialGroup()
                .addGap(14, 14, 14)
                .addComponent(loadAudio)
                .addGap(11, 11, 11)
                .addGroup(leftPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(playPause, javax.swing.GroupLayout.PREFERRED_SIZE, 27, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(shiftForward, javax.swing.GroupLayout.PREFERRED_SIZE, 27, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(stopReset, javax.swing.GroupLayout.PREFERRED_SIZE, 27, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(shiftBack, javax.swing.GroupLayout.PREFERRED_SIZE, 27, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(effectsLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(chooseStock, javax.swing.GroupLayout.PREFERRED_SIZE, 107, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(separator, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(optionsLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(optionsPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(loadVSTButton)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(VSTUIButton)
                .addGap(18, 18, 18)
                .addGroup(leftPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(sizeLabel)
                    .addComponent(leftLabel)
                    .addComponent(rightLabel))
                .addGap(9, 9, 9)
                .addGroup(leftPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(leftSlider, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
                    .addComponent(rightSlider, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
                    .addComponent(sizeSlider, javax.swing.GroupLayout.PREFERRED_SIZE, 133, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(saveAudio)
                .addContainerGap(15, Short.MAX_VALUE))
        );

        getContentPane().add(leftPanel, java.awt.BorderLayout.WEST);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void loadVSTButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_loadVSTButtonActionPerformed
        chooseFiles.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
        int returnVal = chooseFiles.showOpenDialog(this);
        if (returnVal != JFileChooser.APPROVE_OPTION) {
            return;
        }
        PyLink.q.add(new Object[]{PyCalls.METHOD, "set_vst_effect", chooseFiles.getSelectedFile().getPath()});
    }//GEN-LAST:event_loadVSTButtonActionPerformed

    private void VSTUIButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_VSTUIButtonActionPerformed
        PyLink.q.add(new Object[]{PyCalls.METHOD, "open_vst_ui"});
    }//GEN-LAST:event_VSTUIButtonActionPerformed

    private void loadAudioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_loadAudioActionPerformed
        chooseFiles.setFileSelectionMode(JFileChooser.FILES_ONLY);
        int returnVal = chooseFiles.showOpenDialog(this);
        if (returnVal != JFileChooser.APPROVE_OPTION) {
            return;
        }
        PyLink.q.add(new Object[]{PyCalls.LOAD_AUDIO, chooseFiles.getSelectedFile().getPath()});
    }//GEN-LAST:event_loadAudioActionPerformed

    private void playPauseActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_playPauseActionPerformed
        if (playing) {
            playing = false;
        } else {
            playing = true;
            PyLink.q.add(new Object[]{PyCalls.METHOD, "play"});
        }
    }//GEN-LAST:event_playPauseActionPerformed

    private void shiftForwardActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_shiftForwardActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_shiftForwardActionPerformed

    private void stopResetActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_stopResetActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_stopResetActionPerformed

    private void shiftBackActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_shiftBackActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_shiftBackActionPerformed

    private void saveAudioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_saveAudioActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_saveAudioActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Ampter().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton VSTUIButton;
    private javax.swing.JFileChooser chooseFiles;
    private javax.swing.JScrollPane chooseStock;
    private javax.swing.JLabel effectsLabel;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JScrollBar jScrollBar1;
    private javax.swing.JLabel leftLabel;
    private javax.swing.JPanel leftPanel;
    private javax.swing.JSlider leftSlider;
    private javax.swing.JButton loadAudio;
    private javax.swing.JButton loadVSTButton;
    private javax.swing.JLabel optionsLabel;
    private javax.swing.JPanel optionsPanel;
    private javax.swing.JButton playPause;
    private javax.swing.JLabel rightLabel;
    private javax.swing.JSlider rightSlider;
    private javax.swing.JButton saveAudio;
    private javax.swing.JSeparator separator;
    private javax.swing.JButton shiftBack;
    private javax.swing.JButton shiftForward;
    private javax.swing.JLabel sizeLabel;
    private javax.swing.JSlider sizeSlider;
    private javax.swing.JList<String> stockList;
    private javax.swing.JButton stopReset;
    private javax.swing.JPanel viewport;
    // End of variables declaration//GEN-END:variables
}
